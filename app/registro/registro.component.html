<form #formulario="ngForm" (ngSubmit)="guardarFormulario()" class="p-4 rounded-4 shadow-lg bg-white border border-2 border-primary-subtle">

  <h5 class="text-primary fw-bold mb-4 text-center">
    Registro de Usuario
  </h5>

  <div class="mb-3">
    <label for="nombre" class="form-label fw-semibold">Nombre completo</label>
    <input type="text" id="nombre" class="form-control border-primary rounded-pill"
           [(ngModel)]="nombre" name="nombre" required minlength="3"
           [ngClass]="{'is-invalid': formulario.submitted && (!nombre || nombre.length < 3)}">
    <div class="invalid-feedback">
      El nombre es obligatorio (mínimo 3 caracteres).
    </div>
  </div>

  <div class="mb-3">
    <label class="form-label fw-semibold">Género</label>
    <div class="d-flex align-items-center">
      <div class="form-check form-check-inline me-4">
        <input type="radio" class="form-check-input" id="generoM" value="Masculino"
               [(ngModel)]="genero" name="genero" required>
        <label for="generoM" class="form-check-label">Masculino</label>
      </div>
      <div class="form-check form-check-inline">
        <input type="radio" class="form-check-input" id="generoF" value="Femenino"
               [(ngModel)]="genero" name="genero" required>
        <label for="generoF" class="form-check-label">Femenino</label>
      </div>
    </div>
    @if (formulario.submitted && !genero) {
      <div class="text-danger small mt-1">
        Seleccione un género.
      </div>
    }
  </div>

  <div class="mb-3">
    <label for="plan" class="form-label fw-semibold">Tipo de plan</label>
    <select id="plan" class="form-select border-primary rounded-pill"
            [(ngModel)]="plan" name="plan" required
            [ngClass]="{'is-invalid': formulario.submitted && !plan}">
      <option value="" disabled selected>Seleccione una opción</option>
      @for (p of planesDisponibles; track p) {
        <option [value]="p">{{ p }}</option>
      }
    </select>
    <div class="invalid-feedback">
      Seleccione un plan.
    </div>
  </div>

  <div class="mb-4">
    <label for="fecha" class="form-label fw-semibold">Fecha de inicio</label>
    <input type="date" id="fecha" class="form-control border-primary rounded-pill"
           [(ngModel)]="fecha" name="fecha" [min]="fechaMinima" required
           [ngClass]="{'is-invalid': formulario.submitted && !fecha}">
    <div class="invalid-feedback">
      Seleccione una fecha válida (hoy o futura).
    </div>
  </div>

  <div class="text-center">
    <button type="submit"
            class="btn btn-primary px-5 py-2 fw-bold rounded-pill shadow-sm"
            [disabled]="!formulario.valid">
      Enviar
    </button>
  </div>
</form>
